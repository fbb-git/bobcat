void removeDir(string dir)
{
    list parts;
    int idx;
    int dirIdx;
    list entries;
    int warn = 1;

    parts = strtok(dir, "/");
    chdir(dir);

    for (idx = sizeof(parts); idx--; )
    {
        entries = backtick("ls -A");

        if (sizeof(entries) != 0)
        {
            if (warn)
                printf("not removing non-empty dir ", dir, "\n");
            return;
        }

        warn = 0;
        chdir("..");
        run("rmdir " + parts[idx]);
    }
}



