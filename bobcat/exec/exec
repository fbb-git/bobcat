#ifndef INCLUDED_BOBCAT_EXEC_
#define INCLUDED_BOBCAT_EXEC_

#include <string>
#include <vector>

#include <bobcat/fork>

namespace FBB
{

class Exec: public Fork
{
    std::string d_cmd;
    int d_ret = -1;

    public:
        enum Mode
        {
            CLOSE_STD;
        };

        bool execute(std::string const &cmd);
        int ret() const;

    protected:
        static void noClose();

    private:
        std::vector<std::string> splitSource() const;

        void childProcess() override;
        void parentProcess() override;
};

void Exec::noClose()    // static
{}

inline int Exec::ret() const
{
    return d_ret;
}

inline void Exec::parentProcess()
{
    d_ret = waitForChild();
}

} // namespace FBB

#endif
