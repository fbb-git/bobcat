#ifndef INCLUDED_BOBCAT_EXECFORK_
#define INCLUDED_BOBCAT_EXECFORK_

#include <string>
#include <vector>

#include <bobcat/fork>

namespace FBB
{

class ExecFork: public Fork
{
    std::string d_cmd;
    int d_ret = -1;

    public:
        bool execute(std::string const &cmd);
        int ret() const;

    private:
        std::vector<std::string> splitSource() const;

        void childProcess() override;
        void parentProcess() override;
};

inline int ExecFork::ret() const
{
    return d_ret;
}

inline void ExecFork::parentProcess()
{
    d_ret = waitForChild();
}

} // namespace FBB

#endif
