#ifndef INCLUDED_BOBCAT_OFOLDSTREAM_
#define INCLUDED_BOBCAT_OFOLDSTREAM_

#include <ostream>
#include <fstream>

#include <bobcat/ofoldstreambuf>

namespace FBB
{

class OFoldStream: public std::ostream, private OFoldStreambuf
{
    public:
        OFoldStream();
        OFoldStream(char const *fname, 
                    size_t leftIndent = 0, size_t rightMargin = 80,
                    TrailingBlanks tb = IGNORE_TRAILING_BLANKS);

        OFoldStream(std::ostream &dest, 
                    size_t leftIndent = 0, size_t rightMargin = 80,
                    TrailingBlanks tb = IGNORE_TRAILING_BLANKS);

        void open(char const *fname,
                  size_t leftIndent = 0, size_t rightMargin = 80,
                  TrailingBlanks tb = IGNORE_TRAILING_BLANKS);

        void open(std::ostream &out,
                  size_t leftIndent = 0, size_t rightMargin = 80,
                  TrailingBlanks tb = IGNORE_TRAILING_BLANKS);

        void close();

        void setMargins(size_t leftMargin, size_t rightMargin);
        void setTrailingBlanks(TrailingBlanks tb);
};

inline OFoldStream::OFoldStream()
{}

inline OFoldStream::OFoldStream(char const *fname, 
                    size_t leftIndent, size_t rightMargin, TrailingBlanks tb)
:
    OFoldStreambuf(fname, leftIndent, rightMargin, tb)
{
    rdbuf(this);
}

inline OFoldStream::OFoldStream(std::ostream &out, 
                    size_t leftIndent, size_t rightMargin, TrailingBlanks tb)
:
    OFoldStreambuf(out, leftIndent, rightMargin, tb)
{
    rdbuf(this);
}

inline void OFoldStream::close()
{
    OFoldStreambuf::close();
}
    
inline void OFoldStream::setMargins(size_t lm, size_t rm)
{
    OFoldStreambuf::setMargins(lm, rm);
}
    
inline void OFoldStream::setTrailingBlanks(TrailingBlanks tb)
{
    OFoldStreambuf::setTrailingBlanks(tb);
}

} // FBB

#endif




