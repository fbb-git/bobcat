#ifndef INCLUDED_BOBCAT_HOSTENT_
#define INCLUDED_BOBCAT_HOSTENT_

#include <netdb.h>
#include <string>

namespace FBB
{

class Hostent: private hostent
{
    union PTR
    {
        char const * const *p2;
        char const *p1;
    };

    size_t d_nAliases;
    size_t d_nAddresses;
            
    public:
        Hostent();
        Hostent(Hostent const &other);                      // hostent1.i
        Hostent(Hostent &&tmp);
        explicit Hostent(hostent const *other);

        ~Hostent();                                         // destructor.i

        Hostent &operator=(Hostent const &other);
        Hostent &operator=(Hostent &&tmp);                  // opis.i

        char const *alias(size_t nr) const;                 // .i
        char const *binaryAddress(size_t nr) const;         // .i length bytes!
        char const * const *beginAlias() const;             // .i

        std::string dottedDecimalAddress(size_t nr) const;

        char const * const *endAlias() const;               // .i
        char const *hostname() const;                       // .i
        size_t nAliases() const;                            // .i
        size_t nAddresses() const;                          // .i
        size_t addressLength() const;                       // .i
        size_t addressType() const;                         // .i

        void swap(Hostent &other);

    private:
        static char *xstrdup(char const *src);

        void copy(hostent const *other, size_t n_aliases, 
                                         size_t n_addresses);
        void destroy();
                                            // the count functions also count
                                            // the final 0-values.
        size_t countAliases(char const * const *alias) const;
        size_t countAddresses(char const * const *addresses, 
                                            size_t length) const;
};

#include "addresslength.if"
#include "addresstype.if"
#include "alias.if"
#include "beginalias.if"
#include "binaryaddress.if"
#include "destructor.if"
#include "endalias.if"
#include "hostent1.if"
#include "hostname.if"
#include "naddresses.if"
#include "naliases.if"
#include "opis.if"

}   // FBB

#endif
