<a name="header.inc"></a><a name="../../release.yo"></a><html><head>
<title>FBB::Pipe</title>
<link rev="made" href="mailto:Frank B. Brokken: f.b.brokken@rug.nl">
</head>
<body text="#27408B" bgcolor="#FFFAF0">
<hr>
<h1>FBB::Pipe</h1>
<h2>libbobcat1-dev_1.10.0-x.tar.gz</h2>
<h2>2005-2006</h2>

<html><head>
<link rev="made" href="mailto:Frank B. Brokken: f.b.brokken@rug.nl">
</head>
<body text="#27408B" bgcolor="#FFFAF0">
<hr>
<h1></h1>

<html><head>
<title>FBB::Pipe(3bobcat)</title>
<link rev="made" href="mailto:Frank B. Brokken: f.b.brokken@rug.nl">
</head>
<body text="#27408B" bgcolor="#FFFAF0">
<hr>
<h1>FBB::Pipe(3bobcat)</h1>
<h2>libbobcat1-dev_1.10.0-x.tar.gz Error handler</h2>
<h2>2005-2006</h2>


<p>
<h2>NAME</h2>FBB::Pipe - Defines a system level pipe
<p>
<h2>SYNOPSIS</h2>
    <strong>#include &lt;bobcat/pipe&gt;</strong><br>
    Linking option: <em>-lbobcat</em> 
<p>
<h2>DESCRIPTION</h2>
    <strong>FBB::Pipe</strong> objects may be used to construct a <em>pipe</em>. <strong>FBB::Pipe</strong>
objects offer a simple interface to the reading and writing ends of
pipes. <strong>FBB::Pipe</strong> objects are object-wrappers around the <strong>pipe</strong>(2) system
call.
<p>
<a name="namespace.inc"></a><h2>NAMESPACE</h2>
    <strong>FBB</strong><br>
    All constructors, members, operators and manipulators, mentioned in this
man-page, are defined in the namespace <strong>FBB</strong>.
<p>
<h2>INHERITS FROM</h2>
    -
<p>
<h2>CONSTRUCTORS</h2>
    <ul>
    <li> <strong>Pipe()</strong>:<br>
        The default <strong>Pipe()</strong> constructor constructs a basic pipe, calling
<strong>pipe</strong>(2). If the construction fails, an <strong>FBB::Errno</strong> object is thrown,
whose <em>which()</em> member shows the system's <em>errno</em> value set by the failing
<strong>pipe</strong>(2) function.
    <li> <strong>Pipe(int const *fd)</strong>:<br>
        This constructor expects two file descriptors, which already define a
pipe.
    <li> <strong>Pipe(Pipe const &amp;other) throw()</strong>:<br> 
        The standard copy constructor is available.
    </ul>
    Note that when the pipe goes out of scope, no <strong>close</strong>(2) operation is
performed on the pipe's ends. If the pipe should be closed by the desctructor,
derive a class from <strong>Pipe</strong>(3bobcat), whose destructor performs the required
closing-operation.
<p>
<h2>MEMBER FUNCTIONS</h2>
    <ul>
    <li> <strong>int readFd() const</strong>:<br>
        Returns the pipe's file descriptor that is used for reading
    <li> <strong>void readFrom(int filedescriptor)</strong>:<br>
        Sets up redirection from the internal <em>read</em> filedescriptor to the
given filedescriptor: information can be read from the <strong>FBB::Pipe</strong> object by
reading from the provided filedescriptor.
    <li> <strong>void readFrom(int const *filedescriptors, unsigned n)</strong>:<br>
        Sets up redirection from the internal <em>read</em> filedescriptor to the
given filedescriptors: information can be read from the <strong>FBB::Pipe</strong> object by
reading from each of the <strong>n</strong> provided filedescriptors (experimental).
    <li> <strong>int readOnly()</strong>:<br>
        Closes the writing end of the pipe, returns the reading end's file
descriptor. 
    <li> <strong>int writeFd() const</strong>:<br>
        Returns the pipe's file descriptor that is used for writing
    <li> <strong>void writtenBy(int filedescriptor)</strong>:<br>
        Sets up redirection from the internal <em>write</em> filedescriptor to the
given filedescriptor: information can be written to the <strong>FBB::Pipe</strong> object by
writing to the provided filedescriptor.
    <li> <strong>void writtenBy(int const *filedescriptors, unsigned n)</strong>:<br>
        Sets up redirection from the internal <em>write</em> filedescriptor to the
given filedescriptors: information can be written to the <strong>FBB::Pipe</strong> object
by writing to each of the <strong>n</strong> provided filedescriptors.
    <li> <strong>int writeOnly()</strong>:<br>
        Closes the writing end of the pipe, returns the writing end's file
descriptor. 
    </ul>
<p>
<h2>PROTECTED ENUMERATION</h2>
    The <strong>RW</strong> protected enumeration has the following elements:
    <ul>
    <li> <strong>READ</strong>:<br>
        The index in <strong>d_fd[]</strong> (see below) of the element holding the pipe's
reading file descriptor;
    <li> <strong>WRITE</strong>:<br>
        The index in <strong>d_fd[]</strong> (see below) of the element holding the pipe's
writing file descriptor
    </ul>
<p>
<h2>PROTECTED DATA</h2>
    <ul>
    <li> <strong>int d_fd[2]</strong>:<br> 
        The array holding the pipe's file descriptors. The <strong>READ</strong> element
contains the pipe's reading file descriptor, the <strong>WRITE</strong> element
contains the pipe's writing file descriptor,
    </ul>
<p>
<h2>EXAMPLE</h2>
        <pre>

    #include &lt;bobcat/pipe&gt;
    #include &lt;sys/types.h&gt;
    #include &lt;sys/wait.h&gt;
    #include &lt;unistd.h&gt;
    #include &lt;iostream&gt;
    #include &lt;string&gt;
    
    using namespace std;
    using namespace FBB;
    
    int main()
    {
        Pipe p;                         // construct a pipe
    
        cout &lt;&lt; "Read file descriptor: " &lt;&lt; p.getReadFd() &lt;&lt; endl;
        cout &lt;&lt; "Write file descriptor: " &lt;&lt; p.getWriteFd() &lt;&lt; endl;
    
        int pid = fork();
    
        if (pid == -1)
            return 1;
    
        if (!pid)                       //child
        {
            p.readFrom(STDIN_FILENO);   // read what goes into the pipe
    
            string s;

            getline(cin, s);
            cout &lt;&lt; "CHILD: Got `" &lt;&lt; s &lt;&lt; "'" &lt;&lt; endl;    
    
            getline(cin, s);
            cout &lt;&lt; "CHILD: Got `" &lt;&lt; s &lt;&lt; "'" &lt;&lt; endl;    
    
            return 0;
        }
    
        p.writtenBy(STDOUT_FILENO);      // write to the pipe via cout
    
        cout &lt;&lt; "first line" &lt;&lt; endl;
        cout &lt;&lt; "second line" &lt;&lt; endl;
    
        waitpid(pid, 0, 0);
    
        return 0;
    }
        
</pre>

<p>
<h2>FILES</h2>
    <em>bobcat/pipe</em> - defines the class interface
<p>
<h2>SEE ALSO</h2>
    <strong>bobcat</strong>(7), <strong>pipe</strong>(2)
<p>
<h2>BUGS</h2>
    Note that when the pipe goes out of scope, no <strong>close</strong>(2) operation is
performed on the pipe's ends. If the pipe should be closed by the desctructor,
derive a class from <strong>Pipe</strong>(3bobcat), whose destructor performs the required
closing-operation.
<p>
<a name="trailer.inc"></a>
<h2>DISTRIBUTION FILES</h2>
    <ul>
    <li> <em>bobcat_1.10.0-x.dsc</em>: detached signature;
    <li> <em>bobcat_1.10.0-x.tar.gz</em>: source archive;
    <li> <em>bobcat_1.10.0-x_i386.changes</em>: change log;
    <li> <em>libbobcat1_1.10.0-x_i386.deb</em>: debian package holding the
            libraries;
    <li> <em>libbobcat1-dev_1.10.0-x_i386.deb</em>: debian package holding the
            libraries, headers and manual pages;
    <li> <em>http://sourceforge.net/projects/bobcat</em>: public archive location;
    </ul>
<p>
<h2>BOBCAT</h2>
    Bobcat is an acronym of `Brokken's Own Base Classes And Templates'.
<p>
<h2>COPYRIGHT</h2>
    This is free software, distributed under the terms of the 
    Academic Free Licence.
<p>
<h2>AUTHOR</h2>
    Frank B. Brokken (<strong>f.b.brokken@rug.nl</strong>).
<p>
