<a name="header.inc"></a><a name="../../release.yo"></a><html><head>
<title>FBB::MailHeaders</title>
<link rev="made" href="mailto:Frank B. Brokken: f.b.brokken@rug.nl">
</head>
<body text="#27408B" bgcolor="#FFFAF0">
<hr>
<h1>FBB::MailHeaders</h1>
<h2>libbobcat1-dev_1.10.0-x.tar.gz</h2>
<h2>2005-2006</h2>

<html><head>
<link rev="made" href="mailto:Frank B. Brokken: f.b.brokken@rug.nl">
</head>
<body text="#27408B" bgcolor="#FFFAF0">
<hr>
<h1></h1>

<html><head>
<title>FBB::MailHeaders(3bobcat)</title>
<link rev="made" href="mailto:Frank B. Brokken: f.b.brokken@rug.nl">
</head>
<body text="#27408B" bgcolor="#FFFAF0">
<hr>
<h1>FBB::MailHeaders(3bobcat)</h1>
<h2>libbobcat1-dev_1.10.0-x.tar.gz SMTP Mail Headers</h2>
<h2>2005-2006</h2>


<p>
<h2>NAME</h2>FBB::MailHeaders - Handles SMTP Mail Headers
<p>
<h2>SYNOPSIS</h2>
    <strong>#include &lt;bobcat/mailheaders&gt;</strong><br>
    Linking option: <em>-lbobcat</em> 
<p>
<h2>DESCRIPTION</h2>
<p>
<strong>FBB::MailHeaders</strong> objects extract header lines from e-mail. Reading
stops at (and including) the first blank line, which becomes the last element
of the <strong>FBB::MailHeaders</strong> object, interpreted as a <strong>vector</strong>. The actual
e-mail content is therefore left unread on the file containing the e-mail.
<p>
<a name="namespace.inc"></a><h2>NAMESPACE</h2>
    <strong>FBB</strong><br>
    All constructors, members, operators and manipulators, mentioned in this
man-page, are defined in the namespace <strong>FBB</strong>.
<p>
<h2>INHERITS FROM</h2>
    <strong>std::vector&lt;std::string&gt;</strong>
<p>
<h2>ENUMERATIONS</h2>
    The following enumerations are defined in the class <strong>FBB::MailHeaders</strong>:
<p>
<strong>enum Mode</strong><br>
    This enumeration holds two values:
    <ul>
    <li> <strong>READ</strong>:<br>
        When this value is specified at construction time, e-mail is
immediately read by the constructor.
    <li> <strong>DONT_READ</strong>:<br>
        When this value is specified at construction time, e-mail is read
using the <strong>read()</strong> member (see below).
    </ul>
<p>
<strong>enum Match</strong><br>
    This enumeration holds four values:
    <ul>
    <li> <strong>FAIL</strong>:<br>
    Not to be used by public members.
    <li> <strong>FULL</strong>:<br>
    Used by the <strong>setHeaderIterator</strong> (see below) to indicate that the headers
must exactly match a specified header name.
    <li> <strong>INITIAL</strong>:<br>
    Used by the <strong>setHeaderIterator</strong> (see below) to indicate that the initial
part of the headers must match the specified header text.
    <li> <strong>PARTIAL</strong>:<br>
    Used by the <strong>setHeaderIterator</strong> (see below) to indicate that the 
headers must contain the specified header text.
    </ul>
<p>
<h2>CONSTRUCTOR</h2>
    <ul>
    <li> <strong>MailHeaders(std::istream &amp;in, Mode mode = READ)</strong>:<br> 
    This constructor defines the file containing the e-mail to be
processed. The second parameter is by default <strong>MailHeaders::READ</strong>, causing
the object to start reading the e-mail immediately. If set to
<strong>MailHeaders::DONT_READ</strong>, the e-mail is not read. In that case the member
<em>read()</em> can be called to process the e-mail later.
    </ul>
    The standard copy constructor is available.
<p>
<h2>MEMBER FUNCTIONS</h2>
     All members of <strong>std::vector&lt;std::string&gt;</strong> are available, as <strong>FBB::MailHeaders</strong>
inherts from this class.
<p>
<ul>
    <li> <strong>void read()</strong>:<br> 
    Reads the mail-headers from the file passed to the <strong>FBB::MailHeaders</strong> object's
constructor. An <strong>FBB::Errno</strong> object is thrown if the mailheaders were
already read or if the file is incomplete (i.e., the (obligatory) blank line
wasn't found).
     <li> <strong>void setHeaderIterator(char const *header, Match match = FULL)</strong>:<br>
    Sets the header-iterators to the specified <em>header</em>. The parameter
<em>match</em> defines the match-type used for recognizing the header. By default
it is <strong>FBB::MailHeaders::FULL</strong>, meaning that the text provided in <em>header</em> must
match exactly an e-mail header (e.g., <em>From</em> won't match a <em>From:</em>
header). Other matching strategies are <strong>FBB::MailHeaders::INITIAL</strong>, meaning that
<em>header</em> must match the <em>initial</em> text of an e-mail header (e.g., <em>From</em>
matches a <em>From:</em> header); and <strong>FBB::MailHeaders::PARTIAL</strong>, meaning that <em>header</em>
must match the <em>initial</em> text of an e-mail header (e.g., <em>om</em> matches
matches a <em>From:</em> header (but also a <em>From</em> header)). An <strong>FBB::Errno</strong>
exception is thrown if <strong>setHeaderIterator()</strong> is called when no mail headers
are available.
    <li> <strong>const_iterator beginh() const</strong>:<br>
    Returns the begin-iterator (a <strong>FBB::MailHeaders:const_iterator</strong> object)
corresponding to the header and matching type defined by
<strong>setHeaderIterator()</strong>. <strong>endh()</strong> is returned if no such header is
available. Note that the member function ends in <em>h</em>, in order to
distinguish it from the <strong>vector&lt;string&gt;::begin()</strong> member. The
<strong>FBB::MailHeaders:const_iterator</strong> is an iterator to a <em>vector&lt;unsigned&gt;</em>
object, containing the indices in the <strong>FBB::MailHeaders</strong> vector where the
particular header information is found. If the header line consists of only
one line, then the iterator points to a vector holding just one index. Headers
extending over multiple lines have the indices of these lines stored in the
returned vector.
    <li> <strong>const_iterator endh() const</strong>:<br>
    Returns the end-iterator (a <strong>FBB::MailHeaders:const_iterator</strong> object)
corresponding to the header and matching type defined by
<strong>setHeaderIterator()</strong>. Note that the member function ends in <em>h</em>, in order
to distinguish it from the <strong>vector&lt;string&gt;::end()</strong> member.
    <li> <strong>const_reverse_iterator rbeginh() const</strong>:<br>
    Returns the reversed begin-iterator (a
<strong>FBB::MailHeaders:const_reverse_iterator</strong> object) corresponding to the
header and matching type defined by <strong>setHeaderIterator()</strong>. <strong>rendh()</strong> is
returned if no such header is available. Note that the member function ends in
<em>h</em>, in order to distinguish it from the <strong>vector&lt;string&gt;::rbegin()</strong>
member.
    <li> <strong>const_iterator rendh() const</strong>:<br> 
    Returns the end-iterator (a <strong>FBB::MailHeaders:const_reverse_iterator</strong>
object) corresponding to the header and matching type defined by
<strong>setHeaderIterator()</strong>. Note that the member function ends in <em>h</em>, in order
to distinguish it from the <strong>vector&lt;string&gt;::rend()</strong> member.
    </ul>
<p>
<h2>EXAMPLE</h2>
    The following example shows the normal use of these manipulators:
        <pre>

                // create a MailHeader object
    MailHeaders mh(cin, MailHeaders::DONT_READ);

    try
    {           // read the headers
        mh.read();
    }
    catch (Errno &amp;err)
    {
        cout &lt;&lt; err.what() &lt;&lt; endl;
    }

    cout &lt;&lt; "There are " &lt;&lt; mh.size() &lt;&lt; " header lines\n";

                // look for the Received: headers    
    mh.setHeaderIterator("Received:");

                // iterators returning vectors of line numbers
    for (MailHeaders::const_iterator it = mh.beginh(); it != mh.endh(); it++)
    {
        for 
        (       // iterators returning line numbers
            vector&lt;unsigned&gt;::const_iterator nr = it-&gt;begin(); 
                nr != it-&gt;end();
                    nr++
        )       
            cout &lt;&lt; mh[*nr] &lt;&lt; endl;    // print lines of MailHeader object

                // separate each full Received header by +'s
        cout &lt;&lt; "+++++++++++++++++++++++++++++++" &lt;&lt; endl;
    }
    
</pre>

<p>
<h2>FILES</h2>
    <em>bobcat/mailheaders</em> - defines the class interface
<p>
<h2>SEE ALSO</h2>
    <strong>bobcat</strong>(7)
<p>
<h2>BUGS</h2>
    None Reported.
<p>
<a name="trailer.inc"></a>
<h2>DISTRIBUTION FILES</h2>
    <ul>
    <li> <em>bobcat_1.10.0-x.dsc</em>: detached signature;
    <li> <em>bobcat_1.10.0-x.tar.gz</em>: source archive;
    <li> <em>bobcat_1.10.0-x_i386.changes</em>: change log;
    <li> <em>libbobcat1_1.10.0-x_i386.deb</em>: debian package holding the
            libraries;
    <li> <em>libbobcat1-dev_1.10.0-x_i386.deb</em>: debian package holding the
            libraries, headers and manual pages;
    <li> <em>http://sourceforge.net/projects/bobcat</em>: public archive location;
    </ul>
<p>
<h2>BOBCAT</h2>
    Bobcat is an acronym of `Brokken's Own Base Classes And Templates'.
<p>
<h2>COPYRIGHT</h2>
    This is free software, distributed under the terms of the 
    Academic Free Licence.
<p>
<h2>AUTHOR</h2>
    Frank B. Brokken (<strong>f.b.brokken@rug.nl</strong>).
<p>
